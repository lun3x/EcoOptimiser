<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3.css">
  <head>
    <script src="lib/jquery-3.1.1.min.js"></script>
    <script src="lib/jquery.csv.js"></script>
    <script src="wind/windPower.js" type="text/javascript"></script> 
    <script src="hydro/hydroPower.js" type="text/javascript"></script>
    <script src="tidal/tidePower.js" type="text/javascript"></script>
    <script src="dataReading.js" type="text/javascript"></script> 
    <style>
      #map {
        height: 600px;
        width: 70%;
       }
    </style>
  </head>
  <body>
        <div class="w3-panel">
            <h1>EcoOptimiser</h1>
            <h2>Finding the optimal locations for renewable energy</h2>
        </div>
        <div class="w3-cell-row">
            <div id="map" class="w3-cell w3-panel w3-border"></div>
            <div class="w3-cell w3-panel w3-border">
                <h3>Optimal Locations for:</h3>
                <div class="w3-cell-row">
                    <div class="w3-cell">
                        <button id="button0" class="w3-button w3-hover-green w3-white w3-border w3-border-green w3-round-large" onclick="changeButton(0,'green')">Wind</button>
                    </div>
                    <div class="w3-cell">
                        <div class="w3-cell w3-centre">
                        <button id="button1" class="w3-button w3-hover-blue w3-white w3-border w3-border-blue w3-round-large" onclick="changeButton(1,'blue')">Hydro-Electric</button>
                    </div>
                    </div>
                    <div class="w3-cell">
                        <button id="button2" class="w3-cell w3-button w3-white w3-hover-grey w3-border w3-border-grey w3-round-large" onclick="changeButton(2,'grey')">Tidal</button>
                    </div>
                </div>
                <div style="display:none" id="enList0" class="w3-panel">
                    <ul class="w3-ul">
                        <li class="w3-green"><h4>Best Wind Locations</h4></li>
                        <li id="windLoc1"></li>
                        <li id="windLoc2"></li>
                        <li id="windLoc3"></li>
                    </ul>
                </div>
                <div style="display:none" id="enList1" class="w3-panel">
                    <ul class="w3-ul">
                        <li class="w3-blue"><h4>Best Hydro-Electric Locations</h4></li>
                        <li id="hydroLoc1">Loc 1</li>
                        <li id="hydroLoc2">Loc 2</li>
                        <li id="hydroLoc3">Loc 3</li>
                    </ul>
                </div>
                <div style="display:none" id="enList2" class="w3-panel">
                    <ul class="w3-ul">
                        <li class="w3-grey"><h4>Best Tidal Locations</h4></li>
                        <li id="tidalLoc1">Loc 1</li>
                        <li id="tidalLoc2">Loc 2</li>
                        <li id="tidalLoc3">Loc 3</li>
                    </ul>
                </div>
            </div>
            </div>
    <script>
    var markers = [];
    var buttonStatus = [0,0,0]
    var map;
      function initMap() {
        var hydroData = [];
        var uk = {lat: 54.000, lng: -2.5478};
        map = new google.maps.Map(document.getElementById('map'), {
                zoom: 5,
                center: uk
        });
        
          
        $(document).ready(function() {
            $.ajax({
                type: "GET",
                url: "http://localhost:8000/wind/windData.csv",
                dataType: "text",
                success: function(data) {
                    windData = processData(data);
                    markers[0] = initWindPower(map, windData);
                    setMapOnAll(null,markers[0]);
                    getBestWindLocations(windData);
                }
            });
            $.ajax({
                type: "GET",
                url: "http://localhost:8000/hydro/hydroData.csv",
                dataType: "text",
                success: function(data) {
                    hydroData = processData(data);
                    markers[1] = initHydroPower(map, hydroData);
                    setMapOnAll(null,markers[1]);
                    getBestHydroLocations(hydroData);
                }
            });
            $.ajax({
                type: "GET",
                url: "http://localhost:8000/tidal/tideData.csv",
                dataType: "text",
                success: function(data) {
                    tideData = processData(data);
                    markers[2] = initTidalPower(map, tideData);
                    setMapOnAll(null,markers[2]);
                    getBestTidalLocations(tideData);
                }
            });
        });
      }
    function changeButton(num,colour){
        if(buttonStatus[num]==0){
            document.getElementById("button"+parseInt(num)).className = "w3-button w3-hover-"+colour+" w3-"+colour+" w3-border w3-border-"+colour+" w3-round-large"
            document.getElementById("enList"+parseInt(num)).style.display = "block";
            setMapOnAll(map,markers[num]);
        }
        else{
            document.getElementById("button"+parseInt(num)).className = "w3-button w3-hover-"+colour+" w3-white w3-border w3-border- "+colour+" w3-round-large"
            document.getElementById("enList"+parseInt(num)).style.display = "none";
            setMapOnAll(null,markers[num]);
        }
        buttonStatus[num] = 1 - buttonStatus[num];
    }

function setMapOnAll(map,markers) {
    for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(map);
    }
}
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCS7yxaTkdNhukqXo0vFKA4nZfq_ZTip4k&callback=initMap">
    </script>
  </body>
</html>